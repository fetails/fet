<!DOCTYPE html>
<html>
    <head>
        <link href="https://fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet">
        <script src="js/jquery.min.js"></script>
        <script src="js/dat.gui.min.js"></script>
        <script src="js/stats.js"></script>
        <title>WebGL &bull; Achi</title>
    </head>
    <body>
        <style>
            body, html {
                background-color: #161616;
                font-family: 'Lato', sans-serif;
                margin:0;
                padding:0;
            }
            canvas {
                display:block;
                width:100%;
                height:100vh;
            }
        </style>
        <canvas id="webglex"></canvas>
        <script type="text/javascript">

        var stats = new Stats();
        stats.showPanel( 0 ); // 0: fps, 1: ms, 2: mb, 3+: custom
        document.body.appendChild( stats.dom );

        function update_frame_sequence() 
        {
        	stats.begin();
        	stats.end();
        	requestAnimationFrame( update_frame_sequence );
        }

        let controllers = function()
        {
            this.message = "gui";
            this.welcome = "This is in early beta stage.";
            this.bgCol = [ 92, 159, 106, 1.0 ];
        };

        let create_open_gl = function(ctrl, gl)
        {
            gl.clearColor(ctrl.bgCol[0] / 255, ctrl.bgCol[1] / 255, ctrl.bgCol[2] / 255, ctrl.bgCol[3]);
            gl.clear(gl.COLOR_BUFFER_BIT);
            console.log(ctrl.bgCol);

        };

        window.onload = function()
        {
            let gui = new dat.GUI();
            let ctrl = new controllers();
            gui.add(ctrl, 'message');
            gui.add(ctrl, "welcome");
            gui.addColor(ctrl, "bgCol");

            {
                let canvas = document.querySelector("#webglex");
                let gl = canvas.getContext("webgl2");
                create_open_gl(ctrl, gl);
            }

            update_frame_sequence();
        };
        </script>
    </body>
</html>